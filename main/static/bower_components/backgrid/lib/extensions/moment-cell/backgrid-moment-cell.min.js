/*
  backgrid-moment-cell
  http://github.com/wyuenho/backgrid

  Copyright (c) 2013 Jimmy Yuen Ho Wong and contributors
  Licensed under the MIT @license.
*/
(function(t,i,e,a,n){var s=a.Extension.MomentFormatter=function(t){i.extend(this,this.defaults,t)};s.prototype=new a.CellFormatter,i.extend(s.prototype,{defaults:{modelInUnixOffset:!1,modelInUnixTimestamp:!1,modelInUTC:!0,modelLang:n.lang(),modelFormat:n.defaultFormat,displayInUnixOffset:!1,displayInUnixTimestamp:!1,displayInUTC:!0,displayLang:n.lang(),displayFormat:n.defaultFormat},fromRaw:function(t){if(null==t)return"";var i=this.modelInUnixOffset?n(t):this.modelInUnixTimestamp?n.unix(t):this.modelInUTC?n.utc(t,this.modelFormat,this.modelLang):n(t,this.modelFormat,this.modelLang);return this.displayInUnixOffset?+i:this.displayInUnixTimestamp?i.unix():(this.displayLang&&i.lang(this.displayLang),this.displayInUTC?i.utc():i.local(),i.format(this.displayFormat))},toRaw:function(t){var i=this.displayInUnixOffset?n(+t):this.displayInUnixTimestamp?n.unix(+t):this.displayInUTC?n.utc(t,this.displayFormat,this.displayLang):n(t,this.displayFormat,this.displayLang);if(i&&i.isValid())return this.modelInUnixOffset?+i:this.modelInUnixTimestamp?i.unix():(this.modelLang&&i.lang(this.modelLang),this.modelInUTC?i.utc():i.local(),i.format(this.modelFormat))}});var o=a.Extension.MomentCell=a.Cell.extend({editor:a.InputCellEditor,className:"moment-cell",formatter:s,initialize:function(t){a.Cell.prototype.initialize.apply(this,arguments);var e=s.prototype.defaults,n=i.keys(e),o=i.pick(this,n),l=i.pick(t,n);this.formatter=new this.formatter(i.extend({},e,o,l)),this.editor=this.editor.extend({attributes:i.extend({},this.editor.prototype.attributes||this.editor.attributes||{},{placeholder:this.formatter.displayFormat})})}});i.extend(o.prototype,s.prototype.defaults)})(jQuery,_,Backbone,Backgrid,moment);